<!DOCTYPE html>
<html lang="en">
  <head>
    
    <title>Kanashi</title>

    <!-- css -->
    <link href="../static/styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Hour', 'Camera', 'Toaster', 'Echo'],
          ['0900',  5,      4,    9],
          ['1000',  3,      2,    7],
          ['1100',  7,      9,    2],
          ['1200',  8,      5,    22],
          ['1300',  9,      7,    24],
          ['1400',  1,      2,    5]
        ]);

        var options = {
          title: 'Malicious Attacks',
          curveType: 'function',
          legend: { position: 'bottom' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
      }
    </script>
    </head>

    <body>
      <div class="KANA-SHI"><img src="https://scontent-sjc2-1.xx.fbcdn.net/v/t34.0-0/p280x280/15050246_10155417697559460_523695731_n.gif?oh=f268314ce1e611367ec1dc4944d26887&oe=582AF816" width ="125px" height=" 100px"/></div>

    <canvas id="canvas"></canvas>
        <div class="top">
          <div class="devices" id="1" style="visibility:hidden" style="cursor:pointer"><img id="camera" src="http://simpleicon.com/wp-content/uploads/camera.png" width="70px" height="70px"></div>
          <div class="devices" id="2" style="visibility:hidden" style="cursor:pointer"> <img id="echo" src="https://cdn1.iconfinder.com/data/icons/modern-future-technology-2/128/smart-speaker-512.png" width="75px" height="75px"></div>
          <div class="devices" id="3" style="visibility:hidden" style="cursor:pointer"><img id="toaster" src="https://cdn3.iconfinder.com/data/icons/breakfast-icons/459/Toaster-512.png" width="60px" height="60px"></div>
          <div class="devices" id="4" style="visibility:hidden" style="cursor:pointer"><img id="toaster" src="https://cdn3.iconfinder.com/data/icons/breakfast-icons/459/Toaster-512.png" width="60px" height="60px"></div>
        </div>
        <div id="curve_chart" style="width: 900px; height: 500px"></div>

      <div id ="table">

       <div class="to-device-a">
        <h3>Packets Sent to Device A</h3>
      
        <table border="1">

        <tr>
        <td>Time</td>
        <td>Compromised</td>
        <td>Threat Description</td>
        <td>Action Taken</td>
        <td>Action Success</td>
        <td>Source IP</td>
        <td>Dest IP</td>
        <td>Packet uID</td>
        </tr>


        {% for packet in packets_to_ip_a %}
        
          <tr {% if packet.compromised %} bgcolor="#ffa366" {% endif %}>
            <td>{{ packet.time_classified_utc }}</td>
            <td>{{ packet.compromised }}</td>
            <td>{{ packet.description }}</td>
            <td>{{ packet.action }}</td>
            <td>{{ packet.success }}</td>
            <td>{{ packet.src_IP }}</td>
            <td>{{ packet.dest_IP }}</td>
            <td>{{ packet.packet_ID }}</td>
          </tr>
        {% endfor %}

        </table>
      </div>

      <div class="from-device-a">
        <h3>Packets Sent from Device A</h3>
      
        <table border="1">

        <tr>
        <td>Time</td>
        <td>Compromised</td>
        <td>Threat Description</td>
        <td>Action Taken</td>
        <td>Action Success</td>
        <td>Source IP</td>
        <td>Dest IP</td>
        <td>Packet uID</td>

        {% for packet in packets_from_ip_a %}
          <tr {% if packet.compromised %} bgcolor="#ffa366" {% endif %}>
            <td>{{ packet.time_classified_utc }}</td>
            <td>{{ packet.compromised }}</td>
            <td>{{ packet.description }}</td>
            <td>{{ packet.action }}</td>
            <td>{{ packet.success }}</td>
            <td>{{ packet.src_IP }}</td>
            <td>{{ packet.dest_IP }}</td>
            <td>{{ packet.packet_ID }}</td>
          </tr>
        {% endfor %}
        </table>
      </div>

      <div class="to-device-b">
        <h3>Packets Sent to Device B</h3>
      
        <table border="1">

        <tr>
        <td>Time</td>
        <td>Compromised</td>
        <td>Threat Description</td>
        <td>Action Taken</td>
        <td>Action Success</td>
        <td>Source IP</td>
        <td>Dest IP</td>
        <td>Packet uID</td>
        </tr>

        {% for packet in packets_to_ip_b %}
          <tr {% if packet.compromised %} bgcolor="#ffa366" {% endif %}>
            <td>{{ packet.time_classified_utc }}</td>
            <td>{{ packet.compromised }}</td>
            <td>{{ packet.description }}</td>
            <td>{{ packet.action }}</td>
            <td>{{ packet.success }}</td>
            <td>{{ packet.src_IP }}</td>
            <td>{{ packet.dest_IP }}</td>
            <td>{{ packet.packet_ID }}</td>
          </tr>
        {% endfor %}

        </table>
      </div>

      <div class="from-device-b">
        <h3>Packets Sent from Device B</h3>
      
        <table border="1">

        <tr>
        <td>Time</td>
        <td>Compromised</td>
        <td>Threat Description</td>
        <td>Action Taken</td>
        <td>Action Success</td>
        <td>Source IP</td>
        <td>Dest IP</td>
        <td>Packet uID</td>
        </tr>

        {% for packet in packets_from_ip_b %}
          <tr {% if packet.compromised %} bgcolor="#ffa366" {% endif %}>
            <td>{{ packet.time_classified_utc }}</td>
            <td>{{ packet.compromised }}</td>
            <td>{{ packet.description }}</td>
            <td>{{ packet.action }}</td>
            <td>{{ packet.success }}</td>
            <td>{{ packet.src_IP }}</td>
            <td>{{ packet.dest_IP }}</td>
            <td>{{ packet.packet_ID }}</td>
          </tr>
        {% endfor %}

        </table>
      </div>



      <div class="all-packets">
        <h3>All Packets Log</h3>

        <table border="1">

        <tr>
        <td>Time</td>
        <td>Compromised</td>
        <td>Threat Description</td>
        <td>Action Taken</td>
        <td>Action Success</td>
        <td>Source IP</td>
        <td>Dest IP</td>
        <td>Packet uID</td>
        </tr>


        {% for packet in all_packets %}
          <tr {% if packet.compromised %} bgcolor="#ffa366" {% endif %}>
            <td>{{ packet.time_classified_utc }}</td>
            <td>{{ packet.compromised }}</td>
            <td>{{ packet.description }}</td>
            <td>{{ packet.action }}</td>
            <td>{{ packet.success }}</td>
            <td>{{ packet.src_IP }}</td>
            <td>{{ packet.dest_IP }}</td>
            <td>{{ packet.packet_ID }}</td>
          </tr>
        {% endfor %}

       

        </table>
      </div>

       
    </body>

   <!--  jQuery and js -->
    <script src="../static/jquery-3.1.1.min.js"></script>
    <script src="../static/scripts.js"></script>

    <style>


</style>

<script>
var canvas = document.getElementById("canvas"),
context = canvas.getContext("2d"),
width = canvas.width = window.innerWidth - 100,
height = canvas.height = window.innerHeight - 100;

var Line = {
  x: 0,
  y: 0,
  length: 100,
  angle: 0,
  parent: null,

  create: function(x, y, length, angle) {
    var obj = Object.create(this);
    obj.init(x, y, length, angle);
    return obj;
  },

  init: function(x, y, length, angle) {
    this.x = x;
    this.y = y;
    this.length = length;
    this.angle = angle;
  },

  getEndX: function() {
    var angle = this.angle;
    return this.x + Math.cos(angle) * this.length;
  },

  getEndY: function() {
    var angle = this.angle;
    return this.y + Math.sin(angle) * this.length;
  },

  render: function(context) {
    context.strokeStyle = "#ba8ffd";
    context.beginPath();
    context.moveTo(this.x, this.y);
    context.lineTo(this.getEndX(), this.getEndY());
    context.stroke();
  }
};

var line = Line.create(width / 2, height / 2, (height/ 2 - 10), 0);
var angle = 0;
context.lineWidth = 0.25;


update();

function update() {
  context.strokeStyle = "#ba8ffd";
  context.beginPath();
  context.moveTo(line.getEndX(), line.getEndY());

  line.angle = Math.sin(angle) / Math.random();
  angle += 0.025;

  context.lineTo(line.getEndX(), line.getEndY());
  context.stroke();

  requestAnimationFrame(update);
}


$(document).ready(function() {
  
  $("#1").animate({position: "relative", bottom: '+=375', right: '400px',height: '75px', width: '75px', padding: '20px', fontSize: '1.5em'},750);
  $("#2").animate({position: "relative",right: '400px', bottom: '-=200', height: '75px', width: '75px', padding: '20px', fontSize: '1.5em'},1750);
  $("#3").animate({position: "relative",left: '400px',bottom: '-=200', height: '75px', width: '75px', padding: '20px', fontSize: '1.5em'},2250);
  $("#4").animate({position: "relative", bottom: '+=375', left: '400px', height: '75px', width: '75px', padding: '20px', fontSize: '1.5em'},750);
  document.getElementById("1").style.visibility='visible';  
  document.getElementById("2").style.visibility='visible'; 
  document.getElementById("3").style.visibility='visible';
  document.getElementById("4").style.visibility='visible';

});


</script>

</html>